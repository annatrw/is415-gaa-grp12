---
title: "Spatial Point Pattern Analysis"
date-modified: "`r Sys.Date()`"
format: html
execute: 
  message: true 
  warning: false
editor: visual
---

# Import packages

```{r}
pacman::p_load(maptools, sf, raster, spatstat, tmap, tidyverse)
```

# Data

```{r}
before <- read_csv("data/aspatial/listings.csv")
```

```{r}
after <- read_csv("data/aspatial/listings_after.csv")
```

```{r}
glimpse(before)
```



```{r}
nbh_sf <- st_read("data/aspatial/neighbourhoods.geojson") %>%
  st_transform(crs=4555)
```

```{r}
st_crs(nbh_sf)
```



```{r}
before <- subset(before, select=c(id, host_name, host_since, street, neighbourhood, neighbourhood_cleansed, city, state, zipcode, latitude, longitude))
```

```{r}
before_sf <- st_as_sf(before, coords=c("longitude", "latitude"), crs=4555)
```

```{r}
tmap_mode("plot")+
  qtm(nbh_sf) +
  tm_shape(before_sf)+
  tm_dots()

```

```{r}
st_crs(nbh_sf)
```


```{r}
before_sp <- as_Spatial(before_sf)
nbh_sp <- as_Spatial(nbh_sf)
```

```{r}
before_sp
```

```{r}
before_spObj <- as(before_sp, "SpatialPoints")
nbh_spObj <- as(nbh_sp, "SpatialPolygons")
```

```{r}
before_spObj
```
```{r}
nbh_spObj
```

```{r}
#before_ppp <- as(before_spObj, "ppp")
#nbh_ppp <- as(nbh_spObj, "ppp")
```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

# First order

# Second order
